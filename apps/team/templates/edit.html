{% extends 'core/base.html' %}

{% block title %}Edit team | {% endblock %}

{% block content %}

<nav class="breadcrumb" aira-label="breadcrumbs">
  <ul>
    <li><a href="#">Dashboard</a></li>
    <li><a href="{% url 'myaccount' %}">My account</a></li>
    <li class="active"><a href="{% url 'team:edit' %}" aria-current="page">Edit team</a></li>
  </ul>
</nav>

<div class="columns" id="team-app">
  <div class="column is-4">
    <h1 class="title">Edit team</h1>

    <form method="post" action="{% url 'team:add' %}" @submit="validateForm">
      {% csrf_token %}

      <div class="field">
        <label for="id_title">Title</label>
        <div class="control">
          <input type="text" name="title" id="id_title" v-model="title" class="input">
        </div>
      </div>

      <div class="notification is-danger" v-if="errors.length">
        <p v-for="error in errors">[[ error ]]</p>
      </div>

      <div class="field">
        <div class="control">
          <button class="button is-success">Save changes</button>
        </div>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  const TeamApp = {
    data() {
      return {
        title: '{{ team.title }}',
        errors: [],
      }
    },
    delimiters: ['[[', ']]',],
    methods: {
      validateForm(e) {
        this.errors = [];

        if (this.title && this.title.trim() !== '') {
          return true;
        }

        e.preventDefault();
        this.errors.push('The title field is missing.');
        return false;
      }
    },
  };

  Vue.createApp(TeamApp).mount('#team-app');
</script>
{% endblock %}
